document.addEventListener("DOMContentLoaded", function() {
    // Get the Add button and the form container
    const addButton = document.getElementById("addButton");
    const formContainer = document.getElementById("addCustomerForm");

    // Get the modal elements
    const modal = document.getElementById("errorModal");
    const closeModal = document.getElementsByClassName("close")[0];
    const errorMessage = document.getElementById("errorMessage");

    // Toggle form visibility on "Add" button click
    addButton.addEventListener("click", function() {
        if (formContainer.style.display === "none" || formContainer.style.display === "") {
            formContainer.style.display = "block";
        } else {
            formContainer.style.display = "none";
        }
    });

    // Handle form submission
    const submitButton = document.getElementById("submitCustomer");
    submitButton.addEventListener("click", function(event) {
        event.preventDefault();  // Prevent default form submission

        // Get input values
        const documentNo = document.getElementById("documentNo").value.trim();
        const documentDate = document.getElementById("documentDate").value.trim();
        const customerNo = document.getElementById("customerNo").value.trim();
        const customerName = document.getElementById("customerName").value.trim();

        // Check if all fields are filled
        if (!documentNo || !documentDate || !customerNo || !customerName) {
            // Show the modal with an error message
            errorMessage.textContent = "Please fill in all the fields.";
            modal.style.display = "block";
            return;
        }

        // Add new data to the table
        const table = document.getElementById("customerTable").getElementsByTagName("tbody")[0];
        const newRow = table.insertRow();

        newRow.insertCell(0).innerText = documentNo;
        newRow.insertCell(1).innerText = documentDate;
        newRow.insertCell(2).innerText = customerNo;
        newRow.insertCell(3).innerText = customerName;

        // Clear the input fields and hide the form again
        document.getElementById("documentNo").value = '';
        document.getElementById("documentDate").value = '';
        document.getElementById("customerNo").value = '';
        document.getElementById("customerName").value = '';
        formContainer.style.display = "none";
    });

    // When the user clicks on the close button (x), close the modal
    closeModal.onclick = function() {
        modal.style.display = "none";
    };

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    };
});
